<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doctor — Report Cases</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        :root{--bg:linear-gradient(180deg,#f0faff,#e0f7fa);--card:#ffffff;--muted:#4b5563;--accent-1:#06b6d4;--accent-2:#7c3aed;--radius:16px;--shadow-sm:0 8px 24px rgba(0,0,0,0.08);--shadow-md:0 16px 40px rgba(0,0,0,0.12);font-family:"Inter",system-ui,sans-serif}
        *{box-sizing:border-box;margin:0;padding:0}
        html,body{height:100%;background:var(--bg);font-size:16px;color:#0f172a;scroll-behavior:smooth}
        a{color:inherit;text-decoration:none;transition:color .2s}
        a:hover{color:var(--accent-2)}
        header{display:flex;justify-content:space-between;align-items:center;padding:18px 28px;background:linear-gradient(90deg,var(--accent-1),var(--accent-2));color:#fff;border-radius:0 0 var(--radius) var(--radius);box-shadow:var(--shadow-md);flex-wrap:wrap}
        .brand{font-weight:700;font-size:20px}
        nav ul{display:flex;gap:18px;list-style:none}
        nav ul li a{color:#fff;font-weight:500;padding:6px 12px;border-radius:10px;transition:background .2s}
        nav ul li a:hover{background:rgba(255,255,255,0.15)}
        main{max-width:950px;margin:32px auto;padding:0 16px}
        .card{background:var(--card);padding:28px;border-radius:var(--radius);box-shadow:var(--shadow-md);display:flex;flex-direction:column;gap:18px;transition:transform .3s,box-shadow .3s}
        .card:hover{transform:translateY(-4px);box-shadow:0 24px 60px rgba(0,0,0,0.18)}
        .card h2{margin:0;color:var(--accent-1)}
        p.sub{color:var(--muted);margin-bottom:24px}
        .form-row{display:flex;gap:16px;flex-wrap:wrap;margin-bottom:12px}
        .field{display:flex;flex-direction:column;gap:6px;flex:1;min-width:140px}
        .field input,.field select,.field textarea{padding:12px 14px;border-radius:12px;border:1px solid #e6e9ef;background:#fff;font-size:15px;transition:border .25s,box-shadow .25s}
        .field input:focus,.field select:focus,.field textarea:focus{border:1.5px solid var(--accent-2);box-shadow:0 4px 15px rgba(124,58,237,0.15)}
        button{padding:12px 18px;border-radius:14px;border:0;cursor:pointer;font-weight:600;color:#fff;background:linear-gradient(90deg,var(--accent-1),var(--accent-2));box-shadow:var(--shadow-sm);transition:transform .2s,box-shadow .2s}
        button:hover{transform:translateY(-2px);box-shadow:0 20px 50px rgba(124,58,237,0.35)}
        footer{text-align:center;color:var(--muted);padding:32px 0;font-size:14px;margin-top:40px}
        @media(max-width:720px){.form-row{flex-direction:column}header{flex-direction:column;gap:12px;text-align:center}nav ul{flex-direction:column;gap:10px}}
    </style>
</head>
<body>
    <header>
        <div class="brand">CleanWater — Doctor</div>
        <nav>
            <ul>
                <li><a href="home.html">Home</a></li>
                <li><a href="signup.html">Logout</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <div class="card">
            <h2>Report Patient Cases</h2>
            <p class="sub">Enter the number of cases observed for each disease. Your submission will help health officials respond quickly.</p>

            <form id="casesForm">
                <div class="form-row">
                    <div class="field"><label for="cholera">Cholera Cases</label><input type="number" id="cholera" placeholder="0"></div>
                    <div class="field"><label for="typhoid">Typhoid Cases</label><input type="number" id="typhoid" placeholder="0"></div>
                </div>
                <div class="form-row">
                    <div class="field"><label for="hepatitis">Hepatitis Cases</label><input type="number" id="hepatitis" placeholder="0"></div>
                    <div class="field"><label for="giardiasis">Giardiasis Cases</label><input type="number" id="giardiasis" placeholder="0"></div>
                </div>
                <div class="form-row">
                    <div class="field"><label for="dysentery">Dysentery Cases</label><input type="number" id="dysentery" placeholder="0"></div>
                    <div class="field"><label for="ecoli">E.Coli Infection Cases</label><input type="number" id="ecoli" placeholder="0"></div>
                </div>
                <div class="field">
                    <label for="remarks">Remarks</label>
                    <textarea id="remarks" rows="3" placeholder="Add any additional info..."></textarea>
                </div>
                <button type="submit">Submit Cases</button>
            </form>
        </div>
    </main>

    <footer>©️ 2025 CleanWater. Report responsibly.</footer>

    <script>
        const form = document.getElementById('casesForm');
        form.addEventListener('submit', async (event) => {
            event.preventDefault();

            const formData = {
                cholera: parseInt(document.getElementById('cholera').value) || 0,
                typhoid: parseInt(document.getElementById('typhoid').value) || 0,
                hepatitis: parseInt(document.getElementById('hepatitis').value) || 0,
                giardiasis: parseInt(document.getElementById('giardiasis').value) || 0,
                dysentery: parseInt(document.getElementById('dysentery').value) || 0,
                ecoli: parseInt(document.getElementById('ecoli').value) || 0,
                remarks: document.getElementById('remarks').value,
            };

            try {
                const response = await fetch('http://127.0.0.1:5000/submit-cases', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(formData),
                });
                
                const result = await response.json();

                if (response.ok) {
                    alert('Success: ' + result.message);
                    form.reset();
                } else {
                    alert('Error: ' + result.message);
                }
            } catch (error) {
                console.error('Submission failed:', error);
                alert('An error occurred. Could not connect to the server.');
            }
        });
    </script>
</body>
</html>